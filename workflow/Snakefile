##################################################
# Name: Snakefile
# Description: Main workflow for SPUMONI 
#              experiments
# Date: 1/29/22
##################################################

configfile: "config/config.yaml"

import glob
import os

# Variables from config file
num_datasets = config["NUM_DATASETS"]
base_dir = config["DATA_ROOT"]
repo_dir = config["REPO_DIR"]
spumoni_dir = config["SPUMONI_DIR"]
num_reads_per_dataset = config["READS_PER_DATASET"]
pbsim_model = config["PBSIM_MODEL"]
dataset_name_exp2 = config["DATASET_NAME"]

large_window_sizes = [8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30]

###############################################################################
# IMPORTANT: Sets the working directory based on configuration parameter, and 
#            it can be set on command-line using --config DATA_ROOT=""
###############################################################################
workdir: config["DATA_ROOT"]

###############################################################################
# Imports rules for each type of experiment
###############################################################################

include: "rules/exp_1.smk"
include: "rules/exp_2.smk"

rule all:
    input:
        "total_results/exp2_full_index_stats.csv",
        "total_results/exp2_index_stats.csv"

# Rule for experiment 1 ...
#rule all:
#    input:
#        expand("analysis_exp1/{type}_{output}_doc_analysis.csv", type=['illumina', 'ont'], output=['ms', 'pml'])

